{"ast":null,"code":"var _jsxFileName = \"/home/pedro/Projetos/licoes-aprendidas/web/src/pages/Perfil/index.js\";\nimport React from 'react';\nimport api from \"../../services/api\";\nimport { getProfile, deleteProfile } from '../../lib/localstorage';\nimport { Header, Body, Button, PicturePreview } from './styles';\nimport { FaCloudUploadAlt, BsFillFolderSymlinkFill, RiUploadCloud2Line } from 'react-icons/all';\nimport { toast } from 'react-toastify';\nimport profilePictureDefault from '../../assets/imagens/avatar/avatar1.jpg';\nconst FILE_SIZE = 900000;\n\nfunction Perfil() {\n  const fileInputRef = React.useRef(null);\n  const [profile, setProfile] = React.useState({\n    name: '',\n    senha: '',\n    senhaAntiga: '',\n    novaSenha: '',\n    confirmarSenha: '',\n    avatar_url: ''\n  });\n  const [profilePicture, setProfilePicture] = React.useState({\n    imagePreviewUrl: profilePictureDefault\n  });\n  React.useEffect(() => {\n    const {\n      user\n    } = getProfile();\n    setProfile({ ...profile,\n      user\n    });\n  }, []);\n\n  function selectInputFile() {\n    fileInputRef.current.click();\n  }\n\n  function selectedProfilePicture(event) {\n    event.preventDefault();\n    const file = event.target.files[0];\n\n    if (!file) {\n      toast.error('Por favor, Selecione uma imagem');\n      return;\n    }\n\n    if (!file.name.match(/\\.(jpg|jpeg|png|bmp|gif)$/)) {\n      toast.error('Ops! Formato da imagem inválido');\n      return;\n    }\n\n    if (file.size > FILE_SIZE) {\n      toast.error('Ops! A imagem que você está tentando enviar é muito grande');\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      setProfilePicture({\n        file,\n        imagePreviewUrl: reader.result\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  async function uploadFile(event) {\n    event.preventDefault();\n    const data = new FormData();\n    data.append('file', profilePicture.file);\n\n    try {\n      const userProfile = JSON.parse(localStorage.getItem('@licoes-aprendidas'));\n      const userPicture = await api.post('/avatar', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${userProfile.session.token}`\n        }\n      });\n      const user = await api.put('/usuarios', { ...data,\n        avatar_id: userPicture._id\n      });\n      console.log(user);\n    } catch (err) {\n      toast.error(err.message);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"page-title mb-4 d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"mr-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    class: \"dashboard\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"Perfil\"), /*#__PURE__*/React.createElement(\"nav\", {\n    \"aria-label\": \"breadcrumb\",\n    class: \"d-inline-block \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"ol\", {\n    class: \"breadcrumb p-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    class: \"breadcrumb-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 19\n    }\n  }))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-xl-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card card-shadow mb-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header border-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"custom-title-wrap bar-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(PicturePreview, {\n    src: profile.avatar_url || profilePicture.imagePreviewUrl,\n    onClick: event => {\n      selectInputFile(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"col-sm-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }, \"Editar nome\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"name\",\n    class: \"form-control form-fill\",\n    placeholder: \"Nome\",\n    value: profile.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"senhaAntiga\",\n    class: \"col-sm-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 19\n    }\n  }, \"Senha antiga\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    class: \"form-control form-fill\",\n    id: \"senhaAntiga\",\n    name: \"senhaAntiga\",\n    placeholder: \"Senha antiga\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"novaSenha\",\n    class: \"col-sm-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 19\n    }\n  }, \"Nova senha\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    class: \"form-control form-fill\",\n    id: \"novaSenha\",\n    name: \"novaSenha\",\n    placeholder: \"Nova senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    for: \"confirmarSenha\",\n    class: \"col-sm-3 col-form-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 19\n    }\n  }, \"Confirmar senha\"), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"col-sm-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"password\",\n    class: \"form-control form-fill\",\n    id: \"confirmarSenha\",\n    name: \"confirmarSenha\",\n    placeholder: \"Confirmar senha\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"form-group row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    class: \"col-sm-3  col-form-label\",\n    for: \"inputGroupFile01\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"file\",\n    id: \"file\",\n    accept: \"image/*\",\n    ref: fileInputRef,\n    hidden: true,\n    onChange: event => {\n      selectedProfilePicture(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    id: \"file-name\",\n    hidden: true,\n    name: \"file-name\",\n    placeholder: \"Selecione um arquivo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    onClick: event => {\n      selectInputFile(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(BsFillFolderSymlinkFill, {\n    size: \"22\",\n    color: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 21\n    }\n  }), \"Selecionar Arquivo\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: event => {\n      uploadFile(event);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(RiUploadCloud2Line, {\n    size: \"22px\",\n    color: \"#fff\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }\n  }), \"Enviar Arquivo\")), /*#__PURE__*/React.createElement(\"div\", {\n    class: \"modal-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 19\n    }\n  }, \"Salvar Altera\\xE7\\xF5es\"))))))));\n}\n\nexport default Perfil;","map":{"version":3,"sources":["/home/pedro/Projetos/licoes-aprendidas/web/src/pages/Perfil/index.js"],"names":["React","api","getProfile","deleteProfile","Header","Body","Button","PicturePreview","FaCloudUploadAlt","BsFillFolderSymlinkFill","RiUploadCloud2Line","toast","profilePictureDefault","FILE_SIZE","Perfil","fileInputRef","useRef","profile","setProfile","useState","name","senha","senhaAntiga","novaSenha","confirmarSenha","avatar_url","profilePicture","setProfilePicture","imagePreviewUrl","useEffect","user","selectInputFile","current","click","selectedProfilePicture","event","preventDefault","file","target","files","error","match","size","reader","FileReader","onloadend","result","readAsDataURL","uploadFile","data","FormData","append","userProfile","JSON","parse","localStorage","getItem","userPicture","post","headers","Authorization","session","token","put","avatar_id","_id","console","log","err","message"],"mappings":"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","sourcesContent":["import React from 'react';\nimport api from '~/services/api';\n\nimport { getProfile, deleteProfile } from '../../lib/localstorage';\n\nimport { Header, Body, Button, PicturePreview } from './styles';\n\nimport {\n  FaCloudUploadAlt,\n  BsFillFolderSymlinkFill,\n  RiUploadCloud2Line,\n} from 'react-icons/all';\n\nimport { toast } from 'react-toastify';\n\nimport profilePictureDefault from '../../assets/imagens/avatar/avatar1.jpg';\n\nconst FILE_SIZE = 900000;\n\nfunction Perfil() {\n  const fileInputRef = React.useRef(null);\n\n  const [profile, setProfile] = React.useState({\n    name: '',\n    senha: '',\n    senhaAntiga: '',\n    novaSenha: '',\n    confirmarSenha: '',\n    avatar_url: '',\n  });\n\n  const [profilePicture, setProfilePicture] = React.useState({\n    imagePreviewUrl: profilePictureDefault,\n  });\n\n  React.useEffect(() => {\n    const { user } = getProfile();\n\n    setProfile({\n      ...profile,\n      user,\n    });\n  }, []);\n\n  function selectInputFile() {\n    fileInputRef.current.click();\n  }\n\n  function selectedProfilePicture(event) {\n    event.preventDefault();\n\n    const file = event.target.files[0];\n\n    if (!file) {\n      toast.error('Por favor, Selecione uma imagem');\n      return;\n    }\n\n    if (!file.name.match(/\\.(jpg|jpeg|png|bmp|gif)$/)) {\n      toast.error('Ops! Formato da imagem inválido');\n      return;\n    }\n\n    if (file.size > FILE_SIZE) {\n      toast.error('Ops! A imagem que você está tentando enviar é muito grande');\n      return;\n    }\n\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      setProfilePicture({\n        file,\n        imagePreviewUrl: reader.result,\n      });\n    };\n\n    reader.readAsDataURL(file);\n  }\n\n  async function uploadFile(event) {\n    event.preventDefault();\n\n    const data = new FormData();\n    data.append('file', profilePicture.file);\n\n    try {\n      const userProfile = JSON.parse(\n        localStorage.getItem('@licoes-aprendidas')\n      );\n\n      const userPicture = await api.post('/avatar', data, {\n        headers: {\n          'Content-Type': 'multipart/form-data',\n          Authorization: `Bearer ${userProfile.session.token}`,\n        },\n      });\n\n      const user = await api.put('/usuarios', {\n        ...data,\n        avatar_id: userPicture._id,\n      });\n\n      console.log(user);\n    } catch (err) {\n      toast.error(err.message);\n    }\n  }\n\n  return (\n    <>\n      <Header>\n        <div className=\"row\">\n          <div class=\"page-title mb-4 d-flex align-items-center\">\n            <div class=\"mr-auto\">\n              <h3 class=\"dashboard\">Perfil</h3>\n              <nav aria-label=\"breadcrumb\" class=\"d-inline-block \">\n                <ol class=\"breadcrumb p-0\">\n                  <li class=\"breadcrumb-item\"></li>\n                </ol>\n              </nav>\n            </div>\n          </div>\n          <div className=\"col-xl-12\">\n            <div className=\"card card-shadow mb-4\">\n              <div className=\"card-header border-0\">\n                <div className=\"custom-title-wrap bar-primary\"></div>\n              </div>\n              <Body>\n                <div class=\"form-group row\">\n                  <div class=\"col-sm-3\">\n                    <PicturePreview\n                      src={profile.avatar_url || profilePicture.imagePreviewUrl}\n                      onClick={event => {\n                        selectInputFile(event);\n                      }}\n                    ></PicturePreview>\n                  </div>\n                </div>\n                <div class=\"form-group row\">\n                  <label class=\"col-sm-3 col-form-label\">Editar nome</label>\n                  <div class=\"col-sm-3\">\n                    <input\n                      type=\"name\"\n                      class=\"form-control form-fill\"\n                      placeholder=\"Nome\"\n                      value={profile.name}\n                    ></input>\n                  </div>\n                </div>\n                <div class=\"form-group row\">\n                  <label for=\"senhaAntiga\" class=\"col-sm-3 col-form-label\">\n                    Senha antiga\n                  </label>\n                  <div class=\"col-sm-3\">\n                    <input\n                      type=\"password\"\n                      class=\"form-control form-fill\"\n                      id=\"senhaAntiga\"\n                      name=\"senhaAntiga\"\n                      placeholder=\"Senha antiga\"\n                    ></input>\n                  </div>\n                </div>\n                <div class=\"form-group row\">\n                  <label for=\"novaSenha\" class=\"col-sm-3 col-form-label\">\n                    Nova senha\n                  </label>\n                  <div class=\"col-sm-3\">\n                    <input\n                      type=\"password\"\n                      class=\"form-control form-fill\"\n                      id=\"novaSenha\"\n                      name=\"novaSenha\"\n                      placeholder=\"Nova senha\"\n                    ></input>\n                  </div>\n                </div>\n                <div class=\"form-group row\">\n                  <label for=\"confirmarSenha\" class=\"col-sm-3 col-form-label\">\n                    Confirmar senha\n                  </label>\n                  <div class=\"col-sm-3\">\n                    <input\n                      type=\"password\"\n                      class=\"form-control form-fill\"\n                      id=\"confirmarSenha\"\n                      name=\"confirmarSenha\"\n                      placeholder=\"Confirmar senha\"\n                    ></input>\n                  </div>\n                </div>\n                <div class=\"form-group row\">\n                  <label\n                    class=\"col-sm-3  col-form-label\"\n                    for=\"inputGroupFile01\"\n                  ></label>\n\n                  <input\n                    type=\"file\"\n                    name=\"file\"\n                    id=\"file\"\n                    accept=\"image/*\"\n                    ref={fileInputRef}\n                    hidden\n                    onChange={event => {\n                      selectedProfilePicture(event);\n                    }}\n                  />\n\n                  <input\n                    type=\"text\"\n                    id=\"file-name\"\n                    hidden\n                    name=\"file-name\"\n                    placeholder=\"Selecione um arquivo\"\n                  />\n\n                  <Button\n                    onClick={event => {\n                      selectInputFile(event);\n                    }}\n                  >\n                    <BsFillFolderSymlinkFill size=\"22\" color=\"#fff\" />\n                    Selecionar Arquivo\n                  </Button>\n\n                  <Button\n                    onClick={event => {\n                      uploadFile(event);\n                    }}\n                  >\n                    <RiUploadCloud2Line size=\"22px\" color=\"#fff\" />\n                    Enviar Arquivo\n                  </Button>\n                </div>\n                <div class=\"modal-footer\">\n                  <button type=\"button\" class=\"btn btn-primary\">\n                    Salvar Alterações\n                  </button>\n                </div>\n              </Body>\n            </div>\n          </div>\n        </div>\n      </Header>\n    </>\n  );\n}\n\nexport default Perfil;\n"]},"metadata":{},"sourceType":"module"}